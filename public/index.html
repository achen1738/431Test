<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
  </head>
  <body>
    <form
      Name="form"
      style="display: flex; flex-direction: column; width: 100%;"
      id="formForm"
      onsubmit="return validateForm()"
      method="get"
      action="formProcessor.html"
    >
      <label for="accName">Account Name</label>
      <input Name="acc" id="accName" type="text" />
      <label for="dispName">Display Name</label>
      <input Name="disp" id="dispName" type="text" />
      <label for="email">Email</label>
      <input Name="email" id="email" type="email" />
      <label for="date">Date of Birth</label>
      <input Name="date" id="date" type="date" />
      <label for="phone">Phone Number</label>
      <input
        Name="phone"
        id="phone"
        type="tel"
        pattern="\d{3}-\d{3}-\d{4}"
        title="The given number has to follow this format XXX-XXX-XXXX."
      />
      <label for="password">Password</label>
      <input Name="pass" id="password" type="password" />
      <label for="passwordConf">Password Confirmation</label>
      <input Name="passConf" id="passwordConf" type="password" />
      <input type="hidden" Name="timestamp" id="timestamp" />
      <div style="display: flex; flex-direction: row-reverse; margin-top: 5px;">
        <input type="reset" value="Clear" style="margin-left: 5px;" />
        <input type="submit" />
      </div>
    </form>
    <script>
      function getTimestamp() {
        document.getElementById("timestamp").value = new Date().getTime();
      }

      function olderThan18(day, month, year) {
        return new Date(year + 18, month - 1, day) <= new Date();
      }

      function validateForm() {
        let errorString = "";
        const accountName = document.getElementById("accName").value;
        const displayName = document.getElementById("dispName").value;
        const email = document.getElementById("email").value;
        const date = document.getElementById("date").value;
        const phone = document.getElementById("phone").value;
        const pass = document.getElementById("password").value;
        const passConf = document.getElementById("passwordConf").value;
        let dates = date.split("-").map(num => parseInt(num));
        let error = false;

        // if (!olderThan18(dates[2], dates[1], dates[0])) {
        //   errorString +=
        //     "Date error: The given date of birth has to be older than 18 years old.\n";
        //   error = true;
        // }

        // if (!/^[a-zA-Z][a-zA-Z0-9]+$/.test(accountName)) {
        //   errorString +=
        //     "Account name error: There can only be letters and numbers, and the first character has to be a letter.\n";
        //   error = true;
        // }

        // if (!email.includes(".")) {
        //   errorString +=
        //     "Email error: There has to be at least a '.' in the email\n";
        //   error = true;
        // }

        // if (!/^\d{10}$/.test(phone)) {
        //   errorString +=
        //     "Phone number error: Has to be a 10 number digit, no hyphens or commas\n";
        //   error = true;
        // }

        // if (pass !== passConf) {
        //   errorString += "Password error: The given passwords do not match";
        //   error = true;
        // }

        if (error) {
          alert(errorString);
          return false;
        } else {
          return true;
        }
      }

      getTimestamp();
    </script>
  </body>
</html>
